{% extends 'app/base.html.twig' %}

{% block title %}Habbocan - Habbo'nun Kalbi{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('styles/home.css') }}">
{% endblock %}

{% block body %}
    <div class="home-container">
        {% if pinned_news is defined and pinned_news|length > 0 %}
        <section class="pinned-section">
            <h2 class="section-title">Önemli Haberler</h2>
            <div class="pinned-news-grid">
                {% for news in pinned_news|slice(0, 3) %}
                    <article class="pinned-news-card">
                        <div class="pinned-indicator">
                            <i class="fas fa-thumbtack"></i> Sabit
                        </div>
                            <img src="{{ asset(news.coverImage) }}" class="news-image" alt="{{ news.title }}">
                        <div class="news-content">
                            <h3 class="news-title">{{ news.title }}</h3>
                            <p class="news-excerpt">{{ news.content|striptags|slice(0, 120) ~ '...' }}</p>
                            <a href="{{ path('app_news_show', {'slug': news.slug}) }}" class="news-link">
                                Devamını Oku <i class="fas fa-chevron-right"></i>
                            </a>
                            <div class="news-meta">
                                <span class="news-date"><i class="far fa-calendar-alt"></i> {{ news.createdAt|date('d.m.Y') }}</span>
                                <span class="news-comments"><i class="far fa-comment"></i> {{ news.comments|length }}</span>
                            </div>
                        </div>
                    </article>
                {% endfor %}
            </div>
        </section>
        {% endif %}
        
        {% if badge_news is defined and badge_news|length > 0 %}
        <section class="badges-section">
            <h2 class="section-title">Kazanılabilir Rozetler</h2>
            <div class="badges-news-grid">
                {% for item in badge_news %}
                    <article class="badge-news-card">
                        <div class="badge-indicator">
                            <i class="fas fa-award"></i> Rozet Kazanılabilir
                        </div>
                        {% if item.news.coverImage %}
                            <img src="{{ asset('uploads/images/' ~ item.news.coverImage) }}" class="news-image" alt="{{ item.news.title }}">
                        {% else %}
                            <img src="{{ asset('images/lpromo_greengamejam2_jun25.png') }}" class="news-image" alt="Haber Görseli">
                        {% endif %}
                        <div class="news-content">
                            <h3 class="news-title">{{ item.news.title }}</h3>
                            <div class="badge-codes-list">
                                {% for badgeCode in item.formattedBadgeCodes %}
                                    <span class="badge-code">{{ badgeCode }}</span>
                                {% endfor %}
                            </div>
                            <a href="{{ path('app_news_show', {'slug': item.news.slug}) }}" class="news-link">
                                Detaylar <i class="fas fa-chevron-right"></i>
                            </a>
                            <div class="news-meta">
                                <span class="news-comments"><i class="far fa-calendar-alt"></i> {{ item.news.createdAt|date('d.m.Y') }}</span>
                            </div>
                        </div>
                    </article>
                {% endfor %}
            </div>
        </section>
        {% endif %}
        
        <!-- En Son Haberler -->
        <section class="featured-section">
            <h2 class="section-title">En Son Haberler</h2>
            <div class="featured-news">
                {% if latest_news is defined and latest_news|length > 0 %}
                    {% for news in latest_news %}
                        <article class="news-card">
                            {% if news.coverImage %}
                                <img src="{{ asset('uploads/images/' ~ news.coverImage) }}" class="news-image" alt="{{ news.title }}">
                            {% else %}
                                <img src="{{ asset('images/lpromo_greengamejam2_jun25.png') }}" class="news-image" alt="Haber Görseli">
                            {% endif %}
                            <div class="news-content">
                                <h3 class="news-title">{{ news.title }}</h3>
                                <p class="news-excerpt">{{ news.content|striptags|slice(0, 150) ~ '...' }}</p>
                                <a href="{{ path('app_news_show', {'slug': news.slug}) }}" class="news-link">
                                    Devamını Oku <i class="fas fa-chevron-right"></i>
                                </a>
                                <div class="news-meta">
                                    <span class="news-date"><i class="far fa-calendar-alt"></i> {{ news.createdAt|date('d.m.Y') }}</span>
                                    <span class="news-comments"><i class="far fa-comment"></i> {{ news.comments|length }}</span>
                                </div>
                            </div>
                        </article>
                    {% endfor %}
                {% else %}
                    <div class="no-news-message">
                        <p>Henüz haber bulunmamaktadır.</p>
                    </div>
                {% endif %}
            </div>
        </section>
    </div>
{% endblock %}
